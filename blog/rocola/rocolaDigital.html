<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rocola Digital</title>
    <link rel="stylesheet" href="/assets/css/rocola/styles.css">
</head>

<body>
    <div id="header">
        <h1>Rocola Digital</h1>
        <hr>
        <h2>Lista de canciones</h2>
        <h3>Pulsa el bot√≥n para que la rocala escoja una canci√≥n al azar</h3>     
        <div id="iframeYoutube">
            <iframe id="iframe" src="https://www.youtube.com/embed/RlPNh_PBZb4?si=i07MByw3KibkO2G1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>           
        <button type="button" onclick="playSong()">Canci√≥n</button>
    </div>

    <div id="songs">
        <ol id="songsList">
            <li class="song-itemList" id="1">"Vampire" <hr> Olivia Rodrigo</li>
            <li class="song-itemList" id="2">"Qu√©date" <hr> Quevedo & Bizarrap</li>
            <li class="song-itemList" id="3">"Flowers" <hr> Miley Cyrus</li>
            <li class="song-itemList" id="4">"Ella Baila Sola" <hr> Eslabon Armado & Peso Pluma</li>
            <li class="song-itemList" id="5">"Seven" <hr> Jung Kook (feat. Latto)</li>
            <li class="song-itemList" id="6">"Monaco" <hr> Bad Bunny</li>
            <li class="song-itemList" id="7">"Padam Padam" <hr> Kylie Minogue</li>
            <li class="song-itemList" id="8">"Calla√≠ta" <hr> Bad Bunny & Tainy</li>
            <li class="song-itemList" id="9">"La Beb√© (Remix)" <hr> Yng Lvcas & Peso Pluma</li>
            <li class="song-itemList" id="10">"Ojitos Lindos" <hr> Bad Bunny & Bomba Est√©reo</li>
            <li class="song-itemList" id="11">"Kill Bill" <hr> SZA</li>
            <li class="song-itemList" id="">"Amargura" <hr> Karol G"</li>
            <li class="song-itemList" id="12">"Copa Vac√≠a" <hr> Shakira & Manuel Turizo</li>
            <li class="song-itemList" id="13">"Due√±o de Tu Amor" <hr> Jhayco</li>
            <li class="song-itemList" id="14">"Tal Vez" <hr> Rauw Alejandro</li>
            <li class="song-itemList" id="15">"Mi Ex Ten√≠a Raz√≥n" <hr> Karol G</li>
            <li class="song-itemList" id="16">"ADMV" <hr> Maluma</li>
            <li class="song-itemList" id="17">"Te Felicito" <hr> Shakira & Rauw Alejandro</li>
            <li class="song-itemList" id="18">"Dientes" <hr> J Balvin, Usher & DJ Khaled</li>
            <li class="song-itemList" id="19">"TQG" <hr> Karol G & Shakira</li>
        </ol>
    </div>
    <hr>
    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <p>Intenta otra vez cliceando en el bot√≥n üòä</p>
        </div>
    </div>

    <script>
        const songs = {
            "canciones": [
                {   "titulo": "Vampire", 
                    "artista": "Olivia Rodrigo",
                    "url": "https://www.youtube.com/embed/RlPNh_PBZb4?si=i07MByw3KibkO2G1" 
                },
                {   "titulo": "Qu√©date", 
                    "artista": "Quevedo & Bizarrap",
                    "url": "https://www.youtube.com/embed/_PdogVJx9Iw?si=IA9oPSvjiwNQmEJY" 
                },
                {   "titulo": "Flowers", 
                    "artista": "Miley Cyrus",
                    "url": "https://www.youtube.com/embed/G7KNmW9a75Y?si=fuupRp6Y1S8-Ahkc" 
                },
                {   "titulo": "Ella Baila Sola", 
                    "artista": "Eslabon Armado & Peso Pluma",
                    "url": "https://www.youtube.com/embed/lZiaYpD9ZrI?si=LJ4-rbq1eeMmnqjL" 
                },
                {   "titulo": "Seven", 
                    "artista": "Jung Kook (feat. Latto)",
                    "url": "https://www.youtube.com/embed/QU9c0053UAU?si=feTW_3RUDmUe5Gh3" 
                },
                {   "titulo": "Monaco", 
                    "artista": "Bad Bunny",
                    "url": "https://www.youtube.com/embed/_PJvpq8uOZM?si=hPxqB5j786YwZ9AI" 
                },
                {   "titulo": "Padam Padam", 
                    "artista": "Kylie Minogue",
                    "url": "https://www.youtube.com/embed/p6Cnazi_Fi0?si=7zQMx_ngJPCTUpix" 
                },
                {   "titulo": "Calla√≠ta", 
                    "artista": "Bad Bunny & Tainy",
                    "url": "https://www.youtube.com/embed/acEOASYioGY?si=5DryOf8R3A4MX1Kv" 
                },
                {   "titulo": "La Beb√© (Remix)", 
                    "artista": "Yng Lvcas & Peso Pluma",
                    "url": "https://www.youtube.com/embed/3mchJ-EW9rM?si=vc-DoPOR1An6Gz0v" 
                },
                {   "titulo": "Ojitos Lindos", 
                    "artista": "Bad Bunny & Bomba Est√©reo",
                    "url": "https://www.youtube.com/embed/10EX-_h4pYc?si=TDEA14baf4pkyWLU" 
                },
                {   "titulo": "Kill Bill", 
                    "artista": "SZA",
                    "url": "https://www.youtube.com/embed/SQnc1QibapQ?si=N7QvJHura3GIRZ9C" 
                },
                {   "titulo": "Amargura", 
                    "artista": "Karol G",
                    "url": "https://www.youtube.com/embed/fEWhm_TVvUw?si=MVnxfhcXzIvW7HQz" 
                },
                {   "titulo": "Copa Vac√≠a", 
                    "artista": "Shakira & Manuel Turizo",
                    "url": "https://www.youtube.com/embed/oCxtsTU4BWg?si=Dc8Gu5aAslvR3yJj" 
                },
                {   "titulo": "Due√±o de Tu Amor", 
                    "artista": "Jhayco",
                    "url": "https://www.youtube.com/embed/QdeoocyUk68?si=03v1HR0hESznwEK1" 
                },
                {   "titulo": "Tal Vez", 
                    "artista": "Rauw Alejandro",
                    "url": "https://www.youtube.com/embed/1Pl075mi1rA?si=jfbh_U0PeXHc1Inm" 
                },
                {   "titulo": "Mi Ex Ten√≠a Raz√≥n", 
                    "artista": "Karol G",
                    "url": "https://www.youtube.com/embed/VBcs8DZxBGc?si=RBpAVQxQDppxLuCX" 
                },
                {   "titulo": "ADMV", 
                    "artista": "Maluma",
                    "url": "https://www.youtube.com/embed/lNBSdFw0t_w?si=zzWT3AcLIwYVeyXY" 
                },
                {   "titulo": "Te Felicito", 
                    "artista": "Shakira & Rauw Alejandro",
                    "url": "https://www.youtube.com/embed/4I25nV9hXGA?si=wZKuUXrLOCn9A2il" 
                },
                {   "titulo": "Dientes", 
                    "artista": "J Balvin, Usher & DJ Khaled",
                    "url": "https://www.youtube.com/embed/gVPgwoXm5Rc?si=emDFpNz2GKyV5yRZ" 
                },
                {   "titulo": "TQG", 
                    "artista": "Karol G & Shakira",
                    "url": "https://www.youtube.com/embed/jZGpkLElSu8?si=EgRhH8gn-aXMb3Xw"
                 }
            ]
        }

        let qtySongs = songs.length;
        let arrayFlag = [];
        function playSong() {
            //Reseting the array when achieve for items
            if (arrayFlag.length === 4) {
                arrayFlag = [];
            }
            //To start the array with the first value
            let randomNumber = Math.ceil(Math.random() * 10);
            if (arrayFlag.length === 0) {
                let songElem = document.getElementsByClassName("song-itemList");
                for (let i = 0; i < songElem.length; i++) {
                    songElem[i].style.backgroundColor = "#ffefd5";
                    songElem[i].style.borderColor = "#c3c6ce";
                    songElem[i].style.boxShadow = "0 4px 8px 0 rgba(0, 0, 0, 0.2)";
                }
                arrayFlag.push(randomNumber);
                selectingSongs();
                return;
            }
            //Adding numbers while the array size is <=4
            else if (arrayFlag.length <= 4) {
                if (!arrayFlag.includes(randomNumber)) {
                    arrayFlag.push(randomNumber);
                    selectingSongs();
                }
                else {
                    // Get the modal
                    var modal = document.getElementById("myModal");

                    // Get the <span> element that closes the modal
                    var span = document.getElementsByClassName("close")[0];

                    modal.style.display = "block";

                    // When the user clicks on <span> (x), close the modal
                    span.onclick = function () {
                        modal.style.display = "none";
                    }

                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function (event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
                }
            }

            function selectingSongs() {
                switch (arrayFlag.length) {
                    case 1:
                        itemOfArrayFlag = arrayFlag[0];
                        break;
                    case 2:
                        itemOfArrayFlag = arrayFlag[1];
                        break;
                    case 3:
                        itemOfArrayFlag = arrayFlag[2];
                        break;
                    case 4:
                        itemOfArrayFlag = arrayFlag[3];
                        break;
                    default:
                        itemOfArrayFlag = null;
                }
                if (arrayFlag.length > 1) {
                    let lastIndexOfLastSong = arrayFlag.length - 2;
                    let idOfLastSong = arrayFlag[lastIndexOfLastSong] + 1;
                    let lastSongElem = document.getElementById(idOfLastSong);
                    lastSongElem.style.backgroundColor = "#ffefd5";
                    lastSongElem.style.borderColor = "#c3c6ce";
                    lastSongElem.style.boxShadow = "0 4px 8px 0 rgba(0, 0, 0, 0.2)";                              
                }
                let idOfPresentSong = itemOfArrayFlag + 1;
                let elemOfTheSong = document.getElementById(idOfPresentSong);
                elemOfTheSong.style.borderColor = "#008bf8";
                elemOfTheSong.style.boxShadow = "0 4px 18px 0 rgba(0, 0, 0, 0.25)";
                let iframe = document.getElementById("iframe");
                iframe.src = songs.canciones[idOfPresentSong].url;      
            }
        }

    </script>
</body>

</html>